/*! qad.js v1.0.3 April 25, 2021 */

!function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).p5js=t()}(function(){return function o(e,s,r){function c(i,t){if(!s[i]){if(!e[i]){var n="function"==typeof require&&require;if(!t&&n)return n(i,!0);if(a)return a(i,!0);throw(n=new Error("Cannot find module '"+i+"'")).code="MODULE_NOT_FOUND",n}n=s[i]={exports:{}},e[i][0].call(n.exports,function(t){return c(e[i][1][t]||t)},n,n.exports,o,e,s,r)}return s[i].exports}for(var a="function"==typeof require&&require,t=0;t<r.length;t++)c(r[t]);return c}({1:[function(t,i,n){"use strict";function e(t,i){this.port=t,this.type=i.toLowerCase()||"arduino",this.ready=!1,this.eventQ=[],this.pinsArray=[],this.HIGH="high",this.LOW="low",this.INPUT="input",this.OUTPUT="output",this.ANALOG="analog",this.DIGITAL="digital",this.PWM="pwm",this.SERVO="servo",this.BUTTON="button",this.KNOCK="knock",this.LED="led",this.MOTOR="motor",this.PIEZO="piezo",this.RGBLED="rgbled",this.TEMP="temp",this.TONE="tone",this.VRES="vres",this.callbacks={}}var s=t("./lib/socket_utils.js"),t=t("./lib/special_methods_index.js"),o={button:{fn:t.button,mode:"digital"},knock:{fn:t.piezo,mode:"analog"},led:{fn:t.led,mode:"digital"},motor:{fn:t.motor,mode:"pwm"},piezo:{fn:t.piezo,mode:"digital"},rgbled:{fn:t.rgbled,mode:"pwm"},servo:{fn:t.servo,mode:"servo"},temp:{fn:t.temp,mode:"analog"},tone:{fn:t.piezo,mode:"digital"},vres:{fn:t.vres,mode:"analog"}};e.prototype.registerCb=function(t,i){console.log("Board registerCb  ",t,i);var n=this.callbacks[t];null==n&&(this.callbacks[t]=n=[]),-1===n.indexOf(i)?n.push(i):console.log("This item already exists")};function r(t,i,n){this.pin=t,this.direction=n?n.toLowerCase():"output",this.mode=i?i.toLowerCase():"digital",o[this.mode]&&(this.special=this.mode,this.mode=o[this.mode].mode),this.write=function(){throw new Error("Write undefined")},this.read=function(){throw new Error("Read undefined")}}e.prototype.pin=function(t,i,n){n=new r(t,i,n);if(n.special)o[n.special].fn(n);else if("digital"===n.mode||"analog"===n.mode)s.dispatch(s.pinInit(n.pin,n.mode,n.direction)),s.constructFuncs(n);else{if("pwm"!==n.mode)throw new Error("Please check mode. Value should be 'analog', 'digital', 'pwm', or servo");s.dispatch(s.pinInit(n.pin,n.mode,n.direction)),s.constructFuncs(n,"analog")}return this.pinsArray.push(n),n};function c(t){t&&(this.boardType=t)}e.prototype.ports=function(){var t=new c(this.type);return s.constructPortFuncs(t),t},p5.board=function(t,i,n,o){return s.board=new e(t,i),s.boardInit(t,i),s.socket.on("board ready",function(t){s.board.ready=!0,n&&n(s.board),console.log(" board ready board.analogPins ",t),s.board.eventQ.forEach(function(t){t.func.apply(null,t.args)})}),s.socket.on("board disconnect",function(){console.log("board disconnect event from server "),s.board.ready=!1,o&&o()}),s.socket.on("motors",function(i){console.log("On Motors in board",i,s.board);var t=s.board.callbacks.motor;t&&t.forEach(t=>{t(i)})}),s.board},p5.serial=t.serial},{"./lib/socket_utils.js":9,"./lib/special_methods_index.js":10}],2:[function(t,i,n){var o=t("./socket_utils.js");i.exports=function(t){return t.direction="input",o.dispatch(o.pinInit(t.pin,t.mode,t.direction)),o.constructFuncs(t),t.pressed=function(t){o.dispatch(function(){this.buttonPressedcb=t}.bind(this))},t.released=function(t){o.dispatch(function(){this.buttonReleasedcb=t}.bind(this))},t.held=function(t,i){o.dispatch(function(){this.buttonHeldcb=function(){return setTimeout(t,i)}}.bind(this))},t}},{"./socket_utils.js":9}],3:[function(t,i,n){var e=t("./socket_utils.js");i.exports=function(t){e.dispatch(e.pinInit(t.pin,t.mode,t.direction)),e.constructFuncs(t);var i=0;return t.on=function(){e.dispatch(function(){e.socket.emit("blink cancel"),"pwm"!==this.mode?this.write("HIGH"):this.write(255)}.bind(this))},t.off=function(){e.dispatch(function(){e.socket.emit("blink cancel"),"pwm"!==this.mode?this.write("LOW"):this.write(0)}.bind(this))},t.fade=function(t,i,n,o){e.dispatch(function(){this.mode="pwm",e.socket.emit("fade",{pin:this.pin,start:t,stop:i,time:3e3,inc:o||200})}.bind(this))},t.blink=function(t){e.dispatch(function(){e.socket.emit("blink",{pin:[this.pin],length:t,id:i})}.bind(this)),++i},t.noBlink=function(){e.dispatch(function(){e.socket.emit("blink"+i+" cancel")})},t}},{"./socket_utils.js":9}],4:[function(t,i,n){var o=t("./socket_utils.js");i.exports=function(t){return o.dispatch(o.pinInit(t.pin,t.mode,t.direction)),o.constructFuncs(t),t.on=function(){o.dispatch(function(){"pwm"!==this.mode?this.write("HIGH"):this.write(255)}.bind(this))},t.off=function(){o.dispatch(function(){"pwm"!==this.mode?this.write("LOW"):this.write(10)}.bind(this))},t}},{"./socket_utils.js":9}],5:[function(t,i,n){var o=t("./socket_utils.js");i.exports=function(n){return o.dispatch(o.pinInit(n.pin,n.mode,n.direction)),o.constructFuncs(n),n.read=function(t){var i=o.socketGen("analog","read",n);return o.dispatch(i,t),o.socket.on("return val",function(t){this.readcb&&this.readcb(t.val),this.val=t.val,o.readTests[this.special]&&o.readTests[this.special].call(this,t.val)}.bind(this)),function(t){i(t)}},n.tone=function(t,i){o.dispatch(function(){o.socket.emit("tone",{tone:t,duration:i,pin:this.pin})}.bind(this))},n.noTone=function(){o.dispatch(function(){o.socket.emit("cancel tones")}.bind(this))},n.threshold=function(t){this.threshold=t,this.overThreshold=function(){return this.val>this.threshold}},n}},{"./socket_utils.js":9}],6:[function(t,i,n){var e=t("./socket_utils.js");i.exports=function(t){var i=t.pin;t.redPin=i.r||i.red,t.greenPin=i.g||i.green,t.bluePin=i.b||i.blue,t.common=i.common||i.c||"cathode",e.dispatch(e.pinInit(t.redPin,t.mode,t.direction)),e.dispatch(e.pinInit(t.greenPin,t.mode,t.direction)),e.dispatch(e.pinInit(t.bluePin,t.mode,t.direction)),t.write=function(t){this.color=Array.isArray(t)?p5.prototype.color(t):t,this.color.writeArr=[],"anode"===this.common?(this.color.writeArr[0]=255-this.color.rgba[0],this.color.writeArr[1]=255-this.color.rgba[1],this.color.writeArr[2]=255-this.color.rgba[2]):this.color.writeArr=this.color.rgba,console.log("Write Array ",this.color.writeArr),e.dispatch(function(){e.socket.emit("rgb write",{red:[this.redPin,this.color.writeArr[0]],green:[this.greenPin,this.color.writeArr[1]],blue:[this.bluePin,this.color.writeArr[2]]})}.bind(this))},t.read=function(i){this.incomingColor={},e.dispatch(function(){function t(t){this.incomingColor[t.type]=t.val,3===Object.keys(this.incomingColor).length&&(this.color=p5.prototype.color([this.incomingColor.red,this.incomingColor.green,this.incomingColor.blue]),this.readcb(this.color))}i&&(this.readcb=i),e.socket.emit("rgb read",{pins:{red:this.redPin,green:this.greenPin,blue:this.bluePin},arg:i}),e.socket.on("rgb return red",t.bind(this)),e.socket.on("rgb return green",t.bind(this)),e.socket.on("rgb return blue",t.bind(this))}.bind(this))};var n="anode"===t.common?255:0,o="anode"===t.common?0:255;return t.on=function(){e.dispatch(function(){e.socket.emit("rgb blink cancel");var t=this.offSaved||this.color.writeArr||[o,o,o];this.write(t),console.log("RGB ON",t)}.bind(this))},t.off=function(){this.offSaved=this.color.writeArr.slice(),e.dispatch(function(){e.socket.emit("rgb blink cancel"),this.write([n,n,n])}.bind(this))},t.blink=function(){e.dispatch(function(){e.socket.emit("rgb blink",{pins:{red:[this.redPin,this.color.writeArr[0]||255],green:[this.greenPin,this.color.writeArr[1]||255],blue:[this.bluePin,this.color.writeArr[2]||255]},length:length})}.bind(this))},t.noBlink=function(){e.dispatch(function(){e.socket.emit("rgb blink cancel")})},t.fade=function(t,i,n){e.dispatch(function(){e.socket.emit("rgb fade",{red:{pin:this.redPin,start:t[0],stop:t[1],time:t[2]||3e3,inc:t[3]||200},green:{pin:this.greenPin,start:i[0],stop:i[1],time:i[2]||3e3,inc:i[3]||200},blue:{pin:this.bluePin,start:n[0],stop:n[1],time:n[2]||3e3,inc:n[3]||200}})}.bind(this))},t}},{"./socket_utils.js":9}],7:[function(t,i,n){var o=t("./socket_utils.js").socket,e={},s=function(){return e.connect=function(t,i,n){console.log("serial.js connect method","path",t,"config",i,"callback",n);i={path:t,callback:n,config:i};o.emit("serial init",i),console.log("emitted data init",i)},e.close=function(t){console.log("serial.js close method","serial",s,"callback",t);t={callback:t};o.emit("serial close",t),console.log("emitted close event data init",t)},e.read=function(i){o.emit("serial read"),o.on("serial read return",function(t){e.data=t,i(t)})},e.readEvent=e.read,e.readData=function(){return this.data},e.write=function(t,i){o.emit("serial write",{arg:t}),o.on("serial write return",function(t){i&&i(t)})},e.list=function(i){console.log("emits serial list"),o.emit("serial list"),o.on("serial list return",function(t){i&&i(t.ports)})},e};i.exports=s},{"./socket_utils.js":9}],8:[function(t,i,n){var o=t("./socket_utils.js");i.exports=function(n){return o.dispatch(o.pinInit(n.pin,n.mode,n.direction)),o.constructFuncs(n),n.rangeMin=0,n.rangeMax=45,n.write=function(t){var i=o.socketGen("servo","write",n);o.dispatch(i,t)},n.range=function(t){this.rangeMin=t[0],this.rangeMax=t[1],o.dispatch(function(){o.socket.emit("range",{pin:this.pin,range:t})}.bind(this))},n.sweep=function(t){o.dispatch(function(){o.socket.emit("sweep",{pin:this.pin,min:this.rangeMin,max:this.rangeMax,inc:t})}.bind(this))},n.noSweep=function(){o.dispatch(function(){o.socket.emit("sweep cancel")}.bind(this))},n}},{"./socket_utils.js":9}],9:[function(t,i,n){var s=io.connect("http://localhost:8000/sensors");s.on("error",function(t){console.log(t)});var r={boardInit:function(t,i){console.log("boardInit emitting board object",i,t),s.emit("board object",{board:i,port:t})},board:void 0,constructPortFuncs:function(o){return o.list=function(i){console.log("ports.list called",o.boardType);var t={boardtype:o.boardType};s.emit("ports",t),s.on("return ports",function(t){i&&i(t)})},o.analogPins=function(t,i){t={num:t,boardtype:o.boardType};s.emit("analog pins",t),console.log("analog pins",t),s.on("return analog pins",function(t){console.log("return analog pins",t),i&&i(t)})},o.digitalPins=function(t,i){t={num:t,boardtype:o.boardType};s.emit("digital pins",t),s.on("return digital pins",function(t){console.log("return ports.digitalPins",t),i&&i(t)})},o.motorPins=function(t,i){var n={num:t,boardtype:o.boardType};console.log("ports.motor"),s.emit("motor pins",n),s.on("return motor pins",function(t){console.log("return ports.motor",n),i&&i(t)})},o.usbPins=function(t,i){t={num:t,boardtype:o.boardType};console.log("ports.motor"),s.emit("usb pins",t),s.on("return usb pins",function(t){console.log("return ports.usb",t),i&&i(t)})},o},constructFuncs:function(o,e){e=e||o.mode;return o.read=function(t){console.log("pin.read",t);var i=r.socketGen(e,"read",o);return r.dispatch(i,t),s.on("return val"+o.pin,function(t){this.readcb&&this.readcb(t.val),this.val=t.val,r.readTests[this.special]&&r.readTests[this.special].call(this,t.val)}.bind(this)),function(t){i(t)}},o.write=function(t){var i=r.socketGen(e,"write",o);return r.dispatch(i,t),function(t){i(t)}},o.sendSysex=function(t,i){i&&(this.sysexStringCb=i),console.log("pin.sendSysex",t);var n=r.socketGen(e,"send_sysex",o);return r.dispatch(n,t),s.on("sysex string",function(t){this.sysexStringCb&&this.sysexStringCb(t)}.bind(this)),function(t){n(t)}},o},dispatch:function(t,i){this.board.ready?t(i):this.board.eventQ.push({func:t,args:[i]})},pinInit:function(t,i,n){return function(){s.emit("pin object",{pin:t,mode:i.toLowerCase(),direction:n.toLowerCase()})}},readTests:{button:function(t){1===t?(this.pressedOnce=!0,this.buttonPressedcb&&this.buttonPressedcb(),this.timeout=!!this.buttonHeldcb&&this.buttonHeldcb()):0===t&&(this.pressedOnce&&this.buttonReleasedcb&&this.buttonReleasedcb(),this.timeout&&clearTimeout(this.timeout))},temp:function(t){var i=function(t){return 1.8*t+32},n=function(t){return t+273.15};this.C=(t*(1e3*this._voltsIn/1024)-500)/10,this.F=i(this.C),this.K=n(this.C)},vres:function(t){this.readRange&&this.readRange()}},socket:s,socketGen:function(n,o,e){return function(t){var i;"read"===o&&(e.readcb=t),console.log("action emit ",o,t),s.emit("action",{action:n+((i=o).charAt(0).toUpperCase()+i.substring(1)),pin:e.pin,type:o,arg:t})}}};i.exports=r},{}],10:[function(t,i,n){t={button:t("./button.js"),led:t("./led.js"),motor:t("./motor.js"),piezo:t("./piezo.js"),rgbled:t("./rgb.js"),serial:t("./serial.js"),servo:t("./servo.js"),temp:t("./temp.js"),vres:t("./variable_resistor.js")};i.exports=t},{"./button.js":2,"./led.js":3,"./motor.js":4,"./piezo.js":5,"./rgb.js":6,"./serial.js":7,"./servo.js":8,"./temp.js":11,"./variable_resistor.js":12}],11:[function(t,i,n){var e=t("./socket_utils.js");i.exports=function(t){var i=t.pin,n=i.pin;t._voltsIn=i.voltsIn,t.pin=n,t.direction="input",e.dispatch(e.pinInit(t.pin,t.mode,t.direction)),e.constructFuncs(t);var o="Remember to call read before try to get a temp value.";return t.C=function(){throw new Error(o)},t.F=function(){throw new Error(o)},t.K=function(){throw new Error(o)},t}},{"./socket_utils.js":9}],12:[function(t,i,n){var o=t("./socket_utils.js");i.exports=function(t){return t.direction="input",o.dispatch(o.pinInit(t.pin,t.mode,t.direction)),o.constructFuncs(t),t.range=function(t){var i=t[0],n=t[1];o.dispatch(function(){this.readRange=function(){this.val=this.val/1023*(n-i)+i}}.bind(this))},t.threshold=function(t){this.threshold=t,this.overThreshold=function(){return this.val>this.threshold}},t}},{"./socket_utils.js":9}]},{},[1])(1)});